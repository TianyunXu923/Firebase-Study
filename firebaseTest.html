<!doctype html>
<html lang = “en“>
<head>
	<meta charset = “utf-8“>
	<title>Firebase</title>
  <style>
  form { 
    display: table;  
  }
  p { 
    display: table-row; 
  }
  label {
   display: table-cell; 
   text-align: left;
  }
  input { 
    display: table-cell; 
  }  
  </style>

</head>

<body>

<div class='register'>
  <h4>Register a pokemon</h4>
  <form>
    <p>
      <label for='a'>Name:</label> 
      <input type = 'text' id = 'name'/> <br>
    </p><br>
    <p>  
      <label for='b'>Type:</label>
      <input type = 'text' id = 'type'/> <br>
    </p><br>
    <p>
      <label for='c'>Color:</label>
      <input type='text' id='color'/> 
    </p><br>   
      <button type='button' onclick='registerPokemon()'>Submit</button>
  </form>	

</div>

<div>
  <h4>Newly Added</h4>
  <ul id='list'>
  </ul>
</div>

<script src="https://www.gstatic.com/firebasejs/3.2.0/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyC900QUPx5l3cvQ5YBoK3KxdkexNulQegs",
    authDomain: "test-26d99.firebaseapp.com",
    databaseURL: "https://test-26d99.firebaseio.com",
    storageBucket: "test-26d99.appspot.com",
  };
  firebase.initializeApp(config);
</script> 
<script>

// example 1, given the name of the key, get value
function getDatabaseValueByKey() {    
  var fruit=firebase.database().ref('data')
  //var databaseRef = firebase.database().ref('data')
  //console.log(databaseRef.child('apple').val())
  fruit.on("value", function(snapshot) {
    //console.log(snapshot.val())

    var apple = snapshot.child("apple").val(); 
  
    var banana = snapshot.child("banana").val(); 
  
    var orange = snapshot.child("orange").val(); 
  
    //console.log([apple, banana, orange])
  })
}

// create Pokemon in the firebase
function Pokemon(){  
  var Pikachu ={
    name: 'Pikachu',
    type: 'Electric',
    color: 'yellow'
  } 

  // create Pokemon database in firebase
  createCategory('Pokemon', Pikachu)


  var Horsea = {
    name: 'Horsea',
    type: 'Water',
    color: 'blue'
  }

  var Bulbasaur = {
    name: 'Bulbasaur',
    type: 'Grass/ Poison',
    color: 'green'
  }

  var Charmander = {
    name: 'Charmander',
    type: 'Fire',
    color: 'red'
  }

  addPokemon(Horsea) 
  addPokemon(Bulbasaur)
  addPokemon(Charmander)

  // list elements that's added on html
  var pokemon = firebase.database().ref('Pokemon')
  pokemon.on('child_added', function(snapshot){
  var ul = document.getElementById('list')
  var li = document.createElement('li')
  li.appendChild(document.createTextNode(snapshot.val().name+', '+ snapshot.val().type))
  ul.appendChild(li)
  //console.log(snapshot.val())
  })
}

// create Pokemon json in database
function createCategory(c, initialInfo){
  var newKey = firebase.database().ref(c+'').push().key  
  var content = newKey+': '
  firebase.database().ref(c).set(content)
  firebase.database().ref(c).child(newKey).set(initialInfo)
}


// add 
// or could create a key of named:
//  firebase.database().ref('Pokemon').child('Pikachu').set()
// info better be a json
 function addPokemon(info){
  // create a new key
  var newKey = firebase.database().ref('Pokemon').push().key

  firebase.database().ref('Pokemon').child(newKey).set(info)
 } 

function registerPokemon(){
  var Name = document.getElementById('name').value
  var Type = document.getElementById('type').value
  var Color = document.getElementById('color').value
  var jsonFormat = {
    name: Name,
    type: Type,
    color: Color
  }
  addPokemon(jsonFormat)
  document.getElementById('name').value = null
  document.getElementById('type').value = null
  document.getElementById('color').value = null

}

Pokemon()

</script>
    
</body>
</html>