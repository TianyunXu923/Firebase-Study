<!doctype html>
<html lang = “en“>
<head>
	<meta charset = “utf-8“>
	<title>Firebase</title>
</head>

<body>
<div>
  <h4>Newly Added</h4>
  <ul id='list'>
  </ul>
</div>	

<script src="https://www.gstatic.com/firebasejs/3.2.0/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyC900QUPx5l3cvQ5YBoK3KxdkexNulQegs",
    authDomain: "test-26d99.firebaseapp.com",
    databaseURL: "https://test-26d99.firebaseio.com",
    storageBucket: "test-26d99.appspot.com",
  };
  firebase.initializeApp(config);
</script> 
<script>
    
  var fruit=firebase.database().ref('data')
  //var databaseRef = firebase.database().ref('data')
  //console.log(databaseRef.child('apple').val())
  fruit.on("value", function(snapshot) {
    //console.log(snapshot.val())

  var apple = snapshot.child("apple").val(); 
  
  var banana = snapshot.child("banana").val(); 
  
  var orange = snapshot.child("orange").val(); 
  
  //console.log([apple, banana, orange])

})
  
  var Pikachu ={
    name: 'Pikachu',
    type: 'Electric',
    color: 'yellow'
  } 

  // create Pokemon database in firebase
  createCategory('Pokemon', Pikachu)


  var Horsea = {
    name: 'Horsea',
    type: 'Water',
    color: 'blue'
  }

  var Bulbasaur = {
    name: 'Bulbasaur',
    type: 'Grass-Poison',
    color: 'green'
  }

  var Charmander = {
    name: 'Charmander',
    type: 'Fire',
    color: 'red'
  }

  addPokemon(Horsea) 
  addPokemon(Bulbasaur)
  addPokemon(Charmander)

  // print elements that's added
  var pokemon = firebase.database().ref('Pokemon')
  pokemon.on('child_added', function(snapshot){
  var ul = document.getElementById('list')
  var li = document.createElement('li')
  li.appendChild(document.createTextNode(snapshot.val().name+', '+ snapshot.val().type))
  ul.appendChild(li)
  //console.log(snapshot.val())
  })

// create Pokemon json in database
function createCategory(c, initialInfo){
  var newKey = firebase.database().ref(c+'').push().key  
  var content = newKey+': '
  firebase.database().ref(c).set(content)
  firebase.database().ref(c).child(newKey).set(initialInfo)
}


// add 
// or could create a key of named:
//  firebase.database().ref('Pokemon').child('Pikachu').set()
// info better be a json
 function addPokemon(info){
  // create a new key
  var newKey = firebase.database().ref('Pokemon').push().key

  firebase.database().ref('Pokemon').child(newKey).set(info)
 } 

//print elements from lastest change to old whenever there is a change
 function printChange(num) {
  var pokemon = firebase.database().ref('Pokemon')
  pokemon.limitToLast(num).on('child_added', function(snapshot){
      console.log(snapshot.val())
  })
 }



</script>
    
</body>
</html>